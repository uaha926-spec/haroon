<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Serene Message For You</title>
    <style>
        /* --- ðŸŽ¨ NEW "SERENE MEADOW" THEME & FONTS --- */
        @import url('https://fonts.googleapis.com/css2?family=Indie+Flower&family=Lato:wght@300;400&display=swap');

        :root {
            --bg-meadow-dark: #1a2a22;
            --bg-meadow-light: #2d4a32;
            --accent-gold: #daa520;
            --text-cream: #faf3e0;
        }

        *, *::before, *::after {
            box-sizing: border-box;
            padding: 0;
            margin: 0;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: linear-gradient(to top, var(--bg-meadow-dark), var(--bg-meadow-light));
            font-family: 'Lato', sans-serif; /* New Clean UI Font */
            color: var(--text-cream);
            transition: opacity 2.5s ease-in-out;
        }

        body.is-fading-out {
            opacity: 0;
        }

        /* --- ðŸŒƒ NEW "MEADOW" BACKGROUND --- */
        .meadow-environment {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1;
            overflow: hidden;
        }
        .fireflies-container { position: absolute; width: 100%; height: 100%; }
        .firefly { 
            position: absolute; background-color: var(--accent-gold); 
            border-radius: 50%; 
            box-shadow: 0 0 10px var(--accent-gold), 0 0 20px var(--accent-gold);
            animation: float-around 15s infinite ease-in-out;
        }
        @keyframes float-around {
            0%, 100% { transform: translateX(0) translateY(0); opacity: 0; }
            50% { opacity: 1; }
            75% { transform: translateX(20vw) translateY(-30vh); }
            90% { transform: translateX(-10vw) translateY(10vh); }
        }
        
        .mist-layer {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 40%;
            background: linear-gradient(to top, rgba(26, 42, 34, 0.8), transparent);
            pointer-events: none;
        }
        .grass-silhouette { 
            position: absolute; bottom: -5px; left: 0; width: 100%; height: 15vh;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0 100 L0 80 C 10 70, 15 50, 20 80 C 25 60, 35 70, 40 80 C 50 60, 60 70, 70 80 C 80 50, 90 70, 100 80 L 100 100 Z" fill="%230e1a14"/></svg>') repeat-x;
            background-size: 100px 100px;
            z-index: 10;
        }

        /* --- ðŸ“„ NEW PAGE CONTAINER & VERTICAL FADE TRANSITIONS --- */
        .content-view { 
            width: 100%; height: 100vh; display: flex; flex-direction: column; 
            justify-content: center; align-items: center; padding: 20px; 
            position: absolute; top: 0; left: 0; z-index: 5;
            opacity: 0; visibility: hidden; 
            transform: translateY(20px);
            transition: opacity 1.5s ease-out, transform 1.5s ease-out;
        }
        .content-view.is-shown { 
            opacity: 1; visibility: visible; 
            transform: translateY(0);
        }
        
        /* --- ðŸ¦‹ PAGE 1: LANDING SCREEN --- */
        .landing-symbol {
            font-size: 80px;
            filter: drop-shadow(0 0 10px var(--accent-gold));
            animation: flutter 4s infinite ease-in-out;
            margin-bottom: 20px;
        }
        @keyframes flutter {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
        }
        .greeting-text { 
            font-family: 'Indie Flower', cursive; /* New Handwritten Font */
            font-size: 3.2rem;
            text-shadow: 0 1px 5px rgba(0, 0, 0, 0.4); 
            margin-bottom: 35px;
        }
        
        /* --- NEW SIMPLE & GOLDEN BUTTON STYLE --- */
        .meadow-button {
            background: transparent;
            border: 1px solid rgba(250, 243, 224, 0.5);
            color: var(--text-cream); 
            padding: 13px 38px; font-size: 1rem; letter-spacing: 1px;
            font-weight: 400;
            border-radius: 50px; cursor: pointer; 
            transition: all 0.4s ease;
        }
        .meadow-button:hover { 
            border-color: var(--accent-gold);
            box-shadow: 0 0 15px var(--accent-gold);
            color: var(--accent-gold);
        }

        .ig-credit {
            position: absolute; bottom: 20px;
            font-size: 0.9rem; font-weight: 300;
            opacity: 0.6;
        }

        /* --- ðŸ¤” PAGE 2: CONFIRMATION --- */
        .question-text { 
            font-size: 2.2rem;
            margin-bottom: 40px; text-align: center;
        }
        
        /* --- ðŸŽ¶ PAGE 3: NEW TYPEWRITER LYRICS --- */
        #lyric-display-area { 
            font-family: 'Indie Flower', cursive;
            font-size: 2.8rem; /* Smaller as requested */
            height: 150px;
            display: flex; align-items: center; justify-content: center;
            text-align: center;
        }
        .lyric-line-content {
            position: absolute; opacity: 0;
        }
        .lyric-line-content.is-typing { animation: simple-fade-in 1.5s forwards ease-out; }
        .lyric-line-content.is-erasing { animation: simple-fade-out 1.2s forwards ease-in; }
        
        @keyframes simple-fade-in { from { opacity: 0; } to { opacity: 1; } }
        @keyframes simple-fade-out { from { opacity: 1; } to { opacity: 0; } }

        /* --- ðŸ˜˜ FINAL KISS SCREEN --- */
        #final-message {
            position: fixed; inset: 0; z-index: 100;
            display: none; justify-content: center; align-items: center;
            opacity: 0;
            animation: show-final-message 2s forwards;
        }
        #final-kiss-emoji { 
            font-size: 140px; 
            text-shadow: 0 0 25px #ff5d9e;
        }
        @keyframes show-final-message { to { opacity: 1; } }

        /* --- ðŸ“± RESPONSIVE DESIGN --- */
        @media (max-width: 600px) {
            .landing-symbol { font-size: 70px; }
            .greeting-text { font-size: 2.6rem; }
            .question-text { font-size: 1.8rem; }
            #lyric-display-area { font-size: 2.2rem; }
            #final-kiss-emoji { font-size: 100px; }
        }
    </style>
</head>
<body>

    <div class="meadow-environment">
        <div class="fireflies-container" id="fireflies-container"></div>
        <div class="mist-layer"></div>
        <div class="grass-silhouette"></div>
    </div>

    <main class="main-wrapper">
        <!-- ðŸŸ£ PAGE 1 â€” LANDING SCREEN -->
        <section id="view1" class="content-view is-shown">
            <div class="landing-symbol">ðŸ¦‹</div>
            <h1 class="greeting-text">This is only for you..</h1>
            <button id="nextBtn" class="meadow-button">OK</button>
            <p class="ig-credit">@ih4roon</p>
        </section>

        <!-- ðŸŸ¡ PAGE 2 â€” CONFIRMATION SCREEN -->
        <section id="view2" class="content-view">
            <h2 class="question-text">Are you sure you want to see?</h2>
            <button id="confirmBtn" class="meadow-button">YES</button>
        </section>

        <!-- ðŸŸ¢ PAGE 3 â€” LYRICS SCREEN -->
        <section id="view3" class="content-view">
            <div id="lyric-display-area"></div>
        </section>
    </main>
    
    <!-- ðŸ˜˜ FINAL KISS SCREEN -->
    <div id="final-message">
        <span id="final-kiss-emoji">ðŸ˜˜</span>
    </div>

    <audio id="songAudio" src="./haroon.mp3" preload="auto"></audio>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- DOM Element References ---
            const view1 = document.getElementById('view1');
            const view2 = document.getElementById('view2');
            const view3 = document.getElementById('view3');
            const nextBtn = document.getElementById('nextBtn');
            const confirmBtn = document.getElementById('confirmBtn');
            const songAudio = document.getElementById('songAudio');
            const lyricDisplayArea = document.getElementById('lyric-display-area');
            const finalMessage = document.getElementById('final-message');
            const firefliesContainer = document.getElementById('fireflies-container');

            // --- LYRICS DATA (Timing adjusted as requested) ---
            const lyricsContent = [
                { time: 2000, text: "Hathon ke tere apne", duration: 3000 },
                { time: 5000, text: "Hathon me le leta hu", duration: 2500 }, // Duration increased by 0.5s
                { time: 7500, text: "ke taqderein", duration: 2000 },         // Start time shifted by 0.5s
                { time: 9500, text: "Apni sari parh Lo", duration: 3000 }      // Start time shifted by 0.5s
            ];

            // --- Page Navigation ---
            nextBtn.addEventListener('click', () => {
                view1.classList.remove('is-shown');
                view2.classList.add('is-shown');
            });

            confirmBtn.addEventListener('click', () => {
                view2.classList.remove('is-shown');
                view3.classList.add('is-shown');
                startMusicExperience();
            });

            // --- Main Experience Logic ---
            function startMusicExperience() {
                songAudio.play().catch(e => console.error("Audio Error:", e));
                lyricsContent.forEach(line => {
                    setTimeout(() => showLyric(line.text, line.duration), line.time);
                });
            }

            // --- Lyric Display Function ---
            function showLyric(text, duration) {
                const lyricElement = document.createElement('p');
                lyricElement.className = 'lyric-line-content';
                lyricElement.textContent = text;
                
                lyricDisplayArea.innerHTML = '';
                lyricDisplayArea.appendChild(lyricElement);

                setTimeout(() => lyricElement.classList.add('is-typing'), 50);
                
                setTimeout(() => {
                    lyricElement.classList.remove('is-typing');
                    lyricElement.classList.add('is-erasing');
                }, duration - 500);
            }
            
            // --- Exit Sequence ---
            songAudio.addEventListener('ended', () => {
                lyricDisplayArea.innerHTML = '';
                finalMessage.style.display = 'flex';

                setTimeout(() => {
                    document.body.classList.add('is-fading-out');
                }, 2000);
            });

            // --- Dynamic Firefly Generation ---
            function createFireflies() {
                for (let i = 0; i < 20; i++) {
                    const firefly = document.createElement('div');
                    const size = Math.random() * 3 + 1;
                    firefly.className = 'firefly';
                    firefly.style.width = `${size}px`;
                    firefly.style.height = `${size}px`;
                    firefly.style.top = `${Math.random() * 80 + 10}%`;
                    firefly.style.left = `${Math.random() * 80 + 10}%`;
                    const delay = Math.random() * 15;
                    const duration = Math.random() * 10 + 10;
                    firefly.style.animationDelay = `${delay}s`;
                    firefly.style.animationDuration = `${duration}s`;
                    firefliesContainer.appendChild(firefly);
                }
            }
            createFireflies();
        });
    </script>
</body>
</html>
